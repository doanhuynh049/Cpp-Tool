<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>tcallbck.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.12 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>tcallbck.h</h1><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> * Copyright (c) 1991-2006 TIBCO Software Inc.</font>
00003 <font class="comment"> * All rights reserved.</font>
00004 <font class="comment"> * For more information, please contact:</font>
00005 <font class="comment"> * TIBCO Software Inc., Palo Alto, California, USA</font>
00006 <font class="comment"> *</font>
00007 <font class="comment"> * $Id: //dev/packages/tpsi/cpsi/dev/68/src/rtworks/tcallbck.h#1 $</font>
00008 <font class="comment"> */</font>
00009 
00010 <font class="preprocessor">#ifndef _T_CALLBACK_HH_</font>
00011 <font class="preprocessor"></font><font class="preprocessor">#define _T_CALLBACK_HH_</font>
00012 <font class="preprocessor"></font>
00013 <font class="preprocessor">#include &lt;rtworks/types.h&gt;</font>
00014 <font class="preprocessor">#include &lt;rtworks/tex.h&gt;</font>
00015 
00016 
00017 
00018 <font class="keyword">namespace </font>SmartSockets {
00019 
00020   <font class="keyword">class </font>T_IPCX_API TipcConn;
00021   <font class="keyword">class </font>T_IPCX_API TipcMsg;
00022   <font class="keyword">class </font>T_IPCX_API TipcSrv;
00023 
00024 
<a name="l00031"></a><a class="code" href="classSmartSockets_1_1CallBackException.html">00031</a>   <font class="keyword">class </font>T_IPCX_CB_API CallBackException : <font class="keyword">public</font> Exception 
00032   {
00033   <font class="keyword">public</font>:
<a name="l00037"></a><a class="code" href="classSmartSockets_1_1CallBackException.html#a0">00037</a>     CallBackException() {}
00038 
00039 <font class="comment">/* Anticipation of a more functional exception class</font>
00040 <font class="comment">    CallBackException( int4 ssErrNum = 0, </font>
00041 <font class="comment">                       int4 osErrNum = 0,</font>
00042 <font class="comment">                       int4 socketErrNum = 0,</font>
00043 <font class="comment">                       int4 cErrNum = 0)</font>
00044 <font class="comment">                       : Exception (ssErrNum, osErrNum, socketErrNum, cErrNum)</font>
00045 <font class="comment">    {</font>
00046 <font class="comment">    }</font>
00047 <font class="comment">*/</font>
00048 
<a name="l00052"></a><a class="code" href="classSmartSockets_1_1CallBackException.html#a1">00052</a>     <font class="keyword">virtual</font> ~CallBackException() <font class="keywordflow">throw</font>()
00053     {
00054     }
00055   };
00056 
00057 
00065   <font class="keyword">template</font> &lt;<font class="keyword">class</font> Implementor&gt;
<a name="l00066"></a><a class="code" href="classSmartSockets_1_1CallBack.html">00066</a>   <font class="keyword">class </font>T_IPCX_CB_API CallBack 
00067   {
00068     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcSrv;
00069     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcConn;
00070     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API Option;
00071 
00072   <font class="keyword">public</font>:
00073 
<a name="l00080"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a0">00080</a>     <font class="keywordtype">void</font> destroy() <font class="keywordflow">throw</font> (CallBackException) 
00081     {
00082       <font class="keywordflow">if</font> (is_created()) 
00083       {
00084         <font class="keywordflow">if</font> (!TutCbDestroy(m_cb))
00085         {
00086           <font class="keywordflow">throw</font> CallBackException();
00087         }
00088 
00089         m_cb = 0;
00090       }
00091 
00092       <font class="keyword">delete</font> <font class="keyword">this</font>;
00093     }
00094 
00095    
<a name="l00101"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a1">00101</a>     <font class="keywordtype">bool</font> is_created() <font class="keywordflow">throw</font> () 
00102     {
00103       <font class="keywordflow">return</font> 0 != m_cb;
00104     }
00105 
00106 
<a name="l00112"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a2">00112</a>     operator T_CB () <font class="keywordflow">throw</font> () 
00113     {
00114       <font class="keywordflow">return</font> m_cb;
00115     }
00116 
00117 
<a name="l00123"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a3">00123</a>     <font class="keywordtype">void</font> * getArgument () <font class="keyword">const</font> <font class="keywordflow">throw</font> ()
00124     {
00125       <font class="keywordflow">return</font> m_argument;
00126     }
00127 
00128 
<a name="l00134"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a4">00134</a>     <font class="keywordtype">void</font> setArgument (<font class="keywordtype">void</font>* data) <font class="keywordflow">throw</font> ()
00135     {
00136       m_argument = data;
00137     }
00138 
00139 
<a name="l00145"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a5">00145</a>     T_CB_PRIORITY getPriority () <font class="keyword">const</font> <font class="keywordflow">throw</font> (CallBackException) 
00146     {
00147       T_CB_PRIORITY result;
00148 
00149       <font class="keywordflow">if</font> (!TutCbGetPriority (m_cb, &amp;result)) 
00150       {
00151         <font class="keywordflow">throw</font> CallBackException ();
00152       }
00153 
00154       <font class="keywordflow">return</font> result;
00155     }
00156 
00157     
<a name="l00163"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a6">00163</a>     <font class="keywordtype">void</font> setPriority (T_CB_PRIORITY priority) <font class="keywordflow">throw</font> (CallBackException) 
00164     {
00165       <font class="keywordflow">if</font> (!TutCbSetPriority (m_cb, priority)) 
00166       {
00167         <font class="keywordflow">throw</font> CallBackException ();
00168       }
00169     }
00170 
00171 
<a name="l00177"></a><a class="code" href="classSmartSockets_1_1CallBack.html#a7">00177</a>     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> print (T_OUT_FUNC func = (T_OUT_FUNC)TutOut) 
00178                                                 <font class="keywordflow">throw</font> (CallBackException) 
00179     {
00180       TutCbPrint(m_cb, func);
00181       <font class="keywordflow">return</font> T_TRUE;
00182     }
00183 
00184   <font class="keyword">protected</font>:
00185     <font class="comment">/* </font>
00186 <font class="comment">     * The callback structure underlying this object</font>
00187 <font class="comment">     */</font>
00188     T_CB m_cb; 
00189 
00190     <font class="comment">/*</font>
00191 <font class="comment">     * The call back implementing class.</font>
00192 <font class="comment">     */</font>
00193     Implementor * m_implementor;  
00194    
00195     <font class="comment">/*</font>
00196 <font class="comment">     * The callback handling method within the implementing class.</font>
00197 <font class="comment">     */</font>
00198     <font class="keyword">typename</font> Implementor::Handler m_handler; 
00199                                       
00200     <font class="comment">/*</font>
00201 <font class="comment">     * The argument data for this object.</font>
00202 <font class="comment">     */</font>
00203     <font class="keywordtype">void</font> * m_argument;
00204 
00205 
<a name="l00211"></a><a class="code" href="classSmartSockets_1_1CallBack.html#b0">00211</a>     <font class="keywordtype">void</font> setTCB (T_CB handle)
00212     {
00213       m_cb = handle;
00214     }
00215 
00216   <font class="keyword">private</font>:
00223     CallBack (Implementor * implementor,
00224               <font class="keyword">typename</font> Implementor::Handler handler)
00225       : m_cb (0)
00226       , m_implementor (implementor)
00227       , m_handler (handler)
00228       , m_argument(0)
00229     { 
00230     }
00231 
00235     <font class="keyword">virtual</font> ~CallBack () <font class="keywordflow">throw</font>()
00236     {
00237     }
00238 
00244     CallBack (<font class="keyword">const</font> CallBack &amp; callback)
00245     {
00246     }
00247   };
00248 
00249 
<a name="l00256"></a><a class="code" href="classSmartSockets_1_1ConnectionCallBack.html">00256</a>   <font class="keyword">class </font>T_IPCX_CB_API ConnectionCallBack
00257   {      
00258   <font class="keyword">public</font>:
00259     <font class="keyword">enum</font> ConnStatus
00260     {
00261       none,<font class="comment">/* not connected at all */</font>
00262       warm,<font class="comment">/* warm connection to RTserver */</font>
00263       full <font class="comment">/* full connection to RTserver */</font>
00264     };
00265 
00266     <font class="keyword">typedef</font> void (ConnectionCallBack::* Handler) (
00267       CallBack &lt; ConnectionCallBack &gt; * callBack,
00268       TipcSrv &amp; connection,
00269       ConnStatus oldConnStatus,
00270       ConnStatus newConnStatus);
00271 
<a name="l00275"></a><a class="code" href="classSmartSockets_1_1ConnectionCallBack.html#a0">00275</a>     ConnectionCallBack () {}
00276 
<a name="l00280"></a><a class="code" href="classSmartSockets_1_1ConnectionCallBack.html#a1">00280</a>     <font class="keyword">virtual</font> ~ConnectionCallBack ()  <font class="keywordflow">throw</font>() {}
00281 
00282 
00292     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onConnection (
00293       CallBack &lt; ConnectionCallBack &gt; * callBack,
00294       TipcSrv &amp; connection,
00295       ConnStatus oldConnStatus,
00296       ConnStatus newConnStatus); 
00297 
00298   };
00299 
00300 
<a name="l00308"></a><a class="code" href="classSmartSockets_1_1MessageCallBack.html">00308</a>   <font class="keyword">class </font>T_IPCX_CB_API MessageCallBack
00309   {
00310   <font class="keyword">public</font>:
00311     <font class="keyword">typedef</font> void (MessageCallBack::* Handler) (
00312                               CallBack &lt;MessageCallBack&gt; * callBack,
00313                               TipcMsg &amp; message,
00314                               TipcConn &amp; connection);
00315 
<a name="l00319"></a><a class="code" href="classSmartSockets_1_1MessageCallBack.html#a0">00319</a>     MessageCallBack () {}
00320                        
00321 
<a name="l00325"></a><a class="code" href="classSmartSockets_1_1MessageCallBack.html#a1">00325</a>     <font class="keyword">virtual</font> ~MessageCallBack () <font class="keywordflow">throw</font>() {}
00326 
00327 
00336     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onMessage (CallBack&lt;MessageCallBack&gt;* callback,
00337                             TipcMsg &amp; msg,
00338                             TipcConn &amp; conn); 
00339 
00340 <font class="comment">/*</font>
00341 <font class="comment">    static void dispatchCreateMsgDelegator (T_IPC_DISPATCHER_EVENT event,</font>
00342 <font class="comment">                                            void * data,</font>
00343 <font class="comment">                                            void * arg);</font>
00344 <font class="comment">*/</font>
00345 <font class="comment">/*</font>
00346 <font class="comment">    static void connMsgDelegator (T_IPC_CONN conn, </font>
00347 <font class="comment">                                  T_IPC_CONN_MSG_CB_DATA data, </font>
00348 <font class="comment">                                  T_CB_ARG arg);</font>
00349 <font class="comment">*/</font>
00350 
00351   };
00352 
00353 
<a name="l00360"></a><a class="code" href="classSmartSockets_1_1ErrorCallBack.html">00360</a>   <font class="keyword">class </font>T_IPCX_CB_API ErrorCallBack
00361   {      
00362   <font class="keyword">public</font>:
00363     <font class="keyword">typedef</font> void (ErrorCallBack::* Handler) (
00364       CallBack &lt; ErrorCallBack &gt; * callBack,
00365       Exception &amp; error,
00366       TipcConn &amp; conn);
00367 
00368 
<a name="l00372"></a><a class="code" href="classSmartSockets_1_1ErrorCallBack.html#a0">00372</a>     ErrorCallBack() {}
00373 
00374 
<a name="l00378"></a><a class="code" href="classSmartSockets_1_1ErrorCallBack.html#a1">00378</a>     <font class="keyword">virtual</font> ~ErrorCallBack() <font class="keywordflow">throw</font>() {}
00379 
00380 
00389     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onError (
00390       CallBack &lt;ErrorCallBack&gt; * callBack,
00391       Exception &amp; error,
00392       TipcConn &amp; conn); 
00393   };
00394 
00395 
<a name="l00402"></a><a class="code" href="classSmartSockets_1_1MessageQueueCallBack.html">00402</a>   <font class="keyword">class </font>T_IPCX_CB_API MessageQueueCallBack
00403   {
00404   <font class="keyword">public</font>:
00405     <font class="keyword">typedef</font> void (MessageQueueCallBack::* Handler) (
00406                                  CallBack &lt;MessageQueueCallBack&gt; * callBack,
00407                                  TipcMsg &amp; message,
00408                                  TipcConn &amp; connection,
00409                                  uint4 queuePos,
00410                                  <font class="keywordtype">bool</font> is_insert);
00411 
<a name="l00415"></a><a class="code" href="classSmartSockets_1_1MessageQueueCallBack.html#a0">00415</a>     MessageQueueCallBack() {}
00416 
<a name="l00420"></a><a class="code" href="classSmartSockets_1_1MessageQueueCallBack.html#a1">00420</a>     <font class="keyword">virtual</font> ~MessageQueueCallBack () <font class="keywordflow">throw</font>() {}
00421 
00433     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onMessage (CallBack &lt;MessageQueueCallBack&gt; * callBack,
00434                             TipcMsg &amp; message,
00435                             TipcConn &amp; connection,
00436                             uint4 queuePos,
00437                             <font class="keywordtype">bool</font> is_insert); 
00438   };
00439 
00440 
00441 
<a name="l00448"></a><a class="code" href="classSmartSockets_1_1EncodeCallBack.html">00448</a>   <font class="keyword">class </font>T_IPCX_CB_API EncodeCallBack
00449   {
00450   <font class="keyword">public</font>:
00451     <font class="keyword">typedef</font> void (EncodeCallBack::* Handler) ( 
00452                                       CallBack &lt;EncodeCallBack&gt; * callBack,
00453                                       <font class="keywordtype">void</font> * packet,
00454                                       int4 packetSize,
00455                                       <font class="keywordtype">void</font> * origPacket,
00456                                       int4 origPacketSize,
00457                                       TipcMsg &amp; origMessage,
00458                                       TipcConn &amp; connection);
00459 
<a name="l00463"></a><a class="code" href="classSmartSockets_1_1EncodeCallBack.html#a0">00463</a>     EncodeCallBack() {};
00464 
<a name="l00468"></a><a class="code" href="classSmartSockets_1_1EncodeCallBack.html#a1">00468</a>     <font class="keyword">virtual</font> ~EncodeCallBack () <font class="keywordflow">throw</font>() {}
00469 
00484     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onMessage (CallBack &lt;EncodeCallBack&gt; * callBack, 
00485                             <font class="keywordtype">void</font> * packet,
00486                             int4 packetSize,
00487                             <font class="keywordtype">void</font> * origPacket,
00488                             int4 origPacketSize,
00489                             TipcMsg &amp; origMessage,
00490                             TipcConn &amp; connection);
00491   };
00492 
00493 
00494 
<a name="l00501"></a><a class="code" href="classSmartSockets_1_1DecodeCallBack.html">00501</a>   <font class="keyword">class </font>T_IPCX_CB_API DecodeCallBack
00502   {
00503   <font class="keyword">public</font>:
00504     <font class="keyword">typedef</font> void (DecodeCallBack::* Handler) (
00505                                 CallBack &lt; DecodeCallBack &gt; * callBack,
00506                                 <font class="keywordtype">void</font> * packet,
00507                                 int4 packetSize,
00508                                 <font class="keywordtype">void</font> * origPacket,
00509                                 int4 origPacketSize,
00510                                 TipcConn &amp; connection);
00511 
<a name="l00515"></a><a class="code" href="classSmartSockets_1_1DecodeCallBack.html#a0">00515</a>     DecodeCallBack() {};
00516 
<a name="l00520"></a><a class="code" href="classSmartSockets_1_1DecodeCallBack.html#a1">00520</a>     <font class="keyword">virtual</font> ~DecodeCallBack () <font class="keywordflow">throw</font>() {};
00521 
00533     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onMessage (CallBack &lt;DecodeCallBack&gt; * callBack,
00534                             <font class="keywordtype">void</font> * packet,
00535                             int4 packetSize,
00536                             <font class="keywordtype">void</font> * origPacket,
00537                             int4 origPacketSize,
00538                             TipcConn &amp; connection);
00539   };
00540 
00541 }
00542 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated on Mon Apr 13 16:28:25 2009 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.12 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
