<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>tevent.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.12 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>tevent.h</h1><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> * Copyright (c) 1991-2006 TIBCO Software Inc.</font>
00003 <font class="comment"> * All rights reserved.</font>
00004 <font class="comment"> * For more information, please contact:</font>
00005 <font class="comment"> * TIBCO Software Inc., Palo Alto, California, USA</font>
00006 <font class="comment"> *</font>
00007 <font class="comment"> * $Id: //dev/packages/tpsi/cpsi/dev/68/src/rtworks/tevent.h#1 $</font>
00008 <font class="comment"> */</font>
00009 
00010 <font class="preprocessor">#ifndef _T_EVENT_HH</font>
00011 <font class="preprocessor"></font><font class="preprocessor">#define _T_EVENT_HH</font>
00012 <font class="preprocessor"></font>
00013 <font class="preprocessor">#include &lt;rtworks/ipc.h&gt;</font>
00014 <font class="preprocessor">#include &lt;rtworks/tex.h&gt;</font>
00015 
00016 <font class="keyword">namespace </font>SmartSockets {
00017 
<a name="l00024"></a><a class="code" href="classSmartSockets_1_1TipcEventException.html">00024</a>   <font class="keyword">class </font>T_IPCX_API TipcEventException : <font class="keyword">public</font> TipcException {
00025 
00026   <font class="keyword">public</font>:
<a name="l00030"></a><a class="code" href="classSmartSockets_1_1TipcEventException.html#a0">00030</a>     TipcEventException () {};
00031 
<a name="l00035"></a><a class="code" href="classSmartSockets_1_1TipcEventException.html#a1">00035</a>     <font class="keyword">virtual</font> ~TipcEventException () <font class="keywordflow">throw</font>() {
00036     }
00037   };
00038 
00039   <font class="keyword">class </font>T_IPCX_API MessageEvent;
00040   <font class="keyword">class </font>T_IPCX_API SocketEvent;
00041   <font class="keyword">class </font>T_IPCX_API UserEvent;
00042   <font class="keyword">class </font>T_IPCX_API ConnEvent;
00043   <font class="keyword">class </font>T_IPCX_API TimerEvent;
00044   <font class="keyword">class </font>T_IPCX_API TipcMsg;
00045   <font class="keyword">class </font>T_IPCX_API TipcConn;
00046   <font class="keyword">class </font>T_IPCX_API TipcSrv;
00047   <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00048 
<a name="l00058"></a><a class="code" href="classSmartSockets_1_1MessageEventHandler.html">00058</a>   <font class="keyword">class </font>T_IPCX_API MessageEventHandler {
00059   <font class="keyword">public</font>:
00060 
00069     <font class="keyword">typedef</font> void (MessageEventHandler::*Handler) (
00070                                                  MessageEvent&amp; event,
00071                                                  TipcMsg&amp; msg);
00072 
00073 
<a name="l00081"></a><a class="code" href="classSmartSockets_1_1MessageEventHandler.html#a0">00081</a>     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onMessage(MessageEvent&amp; event,
00082                            TipcMsg&amp; msg)
00083     {
00084     }
00085   };
00086 
00087 
<a name="l00097"></a><a class="code" href="classSmartSockets_1_1SocketEventHandler.html">00097</a>   <font class="keyword">class </font>T_IPCX_API SocketEventHandler {
00098   <font class="keyword">public</font>:
00110     <font class="keyword">typedef</font> void (SocketEventHandler::*Handler) (
00111                                                 SocketEvent&amp; event,
00112                                                 sock socketFd,
00113                                                 T_IO_CHECK_MODE checkMode);
00114 
<a name="l00127"></a><a class="code" href="classSmartSockets_1_1SocketEventHandler.html#a0">00127</a>     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onSocket(SocketEvent&amp; event,
00128                           sock socketFd,
00129                           T_IO_CHECK_MODE checkMode)
00130     {
00131     }
00132   };
00133 
00134 
<a name="l00144"></a><a class="code" href="classSmartSockets_1_1UserEventHandler.html">00144</a>   <font class="keyword">class </font>T_IPCX_API UserEventHandler {
00145   <font class="keyword">public</font>:
00146 
00155     <font class="keyword">typedef</font> void (UserEventHandler::*Handler) (
00156                                               UserEvent&amp; event,
00157                                               <font class="keywordtype">void</font>* data);
00158 
00159 
<a name="l00168"></a><a class="code" href="classSmartSockets_1_1UserEventHandler.html#a0">00168</a>     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onUserEvent(UserEvent&amp; event,
00169                              <font class="keywordtype">void</font>* data)
00170     {
00171     }
00172   };
00173 
00174 
<a name="l00184"></a><a class="code" href="classSmartSockets_1_1ConnEventHandler.html">00184</a>   <font class="keyword">class </font>T_IPCX_API ConnEventHandler {
00185   <font class="keyword">public</font>:
00197     <font class="keyword">typedef</font> void (ConnEventHandler::*Handler) (
00198                                               ConnEvent&amp; event,
00199                                               TipcConn&amp; conn,
00200                                               T_IO_CHECK_MODE checkMode);
00201 
<a name="l00213"></a><a class="code" href="classSmartSockets_1_1ConnEventHandler.html#a0">00213</a>     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onConnEvent (ConnEvent&amp; event,
00214                               TipcConn&amp; conn,
00215                               T_IO_CHECK_MODE checkMode)
00216     {
00217 <font class="preprocessor">#if 0</font>
00218 <font class="preprocessor"></font>      <font class="keywordflow">if</font> (checkMode == T_IO_CHECK_READ) {
00219         TipcMsg* msg = conn.next(T_TIMEOUT_FOREVER);
00220         <font class="keywordflow">if</font> (msg != NULL) {
00221           conn.process(*msg);
00222           <font class="keyword">delete</font> msg;
00223         }
00224       }
00225 <font class="preprocessor">#endif</font>
00226 <font class="preprocessor"></font>    }
00227   };
00228 
00229 
<a name="l00239"></a><a class="code" href="classSmartSockets_1_1TimerEventHandler.html">00239</a>   <font class="keyword">class </font>T_IPCX_API TimerEventHandler {
00240   <font class="keyword">public</font>:
00249     <font class="keyword">typedef</font> void (TimerEventHandler::*Handler) (
00250                                                TimerEvent&amp; event,
00251                                                real8 timerInterval);
00252 
<a name="l00261"></a><a class="code" href="classSmartSockets_1_1TimerEventHandler.html#a0">00261</a>     <font class="keyword">virtual</font> <font class="keywordtype">void</font> onTimer(TimerEvent&amp; event,
00262                          real8 timerInterval)
00263     {
00264       printf (<font class="stringliteral">"Current time = %f\n"</font>, TutGetWallTime());
00265     }
00266   };
00267 
00268 
<a name="l00284"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html">00284</a>   <font class="keyword">class </font>T_IPCX_API TipcEvent {
00285 
00286   <font class="keyword">public</font>:
00288 
00289     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00290     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcherTraverser;
00292 
00293   <font class="keyword">protected</font>:
00294 
<a name="l00299"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html#b0">00299</a>     TipcEvent()
00300     : _event (NULL)
00301     {
00302     }
00303 
<a name="l00307"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html#b1">00307</a>     <font class="keyword">virtual</font> ~TipcEvent() <font class="keywordflow">throw</font>()
00308     {
00309     }
00310 
00311 
00312 
<a name="l00316"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html#b2">00316</a>     <font class="keywordtype">void</font> setEvent(T_IPC_EVENT event)
00317     {
00318       _event = event;
00319     }
00320   <font class="keyword">public</font>:
00321 
00322 
<a name="l00327"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html#a0">00327</a>     <font class="keywordtype">void</font> destroy() <font class="keywordflow">throw</font> (TipcException)
00328     {
00329       <font class="keywordflow">if</font> (_event != NULL) {
00330         <font class="keywordflow">if</font> (!TipcEventDestroy(_event))
00331           <font class="keywordflow">throw</font> TipcEventException();
00332       }
00333       <font class="keyword">delete</font> <font class="keyword">this</font>;
00334     }
00335 
00336 
00340     TipcDispatcher getDispatcher()
00341     <font class="keywordflow">throw</font> (TipcException);
00342 
<a name="l00347"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html#a2">00347</a>     operator T_IPC_EVENT() <font class="keyword">const</font>
00348     <font class="keywordflow">throw</font> ()
00349     {
00350       <font class="keywordflow">return</font> _event;
00351     }
00352 
00365     T_IPC_EVENT_TYPE getType() <font class="keyword">const</font>
00366     <font class="keywordflow">throw</font> (TipcException);
00367 
00368 
00369   <font class="keyword">protected</font>:
<a name="l00373"></a><a class="code" href="classSmartSockets_1_1TipcEvent.html#n0">00373</a>     T_IPC_EVENT _event;
00374 
00375   };
00376 
00377 
00378 
<a name="l00392"></a><a class="code" href="classSmartSockets_1_1UserEvent.html">00392</a>   <font class="keyword">class </font>T_IPCX_API UserEvent: <font class="keyword">public</font> TipcEvent {
00393   <font class="keyword">public</font>:
00395 
00396     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00397     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcherTraverser;
00399 
<a name="l00406"></a><a class="code" href="classSmartSockets_1_1UserEvent.html#a0">00406</a>     <font class="keyword">const</font> <font class="keywordtype">void</font>* getData() <font class="keywordflow">throw</font> (TipcException)
00407     {
00408       <font class="keywordtype">void</font>* data = NULL;
00409       <font class="keywordflow">if</font> (!TipcEventGetData(_event,&amp;data))
00410         <font class="keywordflow">throw</font> TipcEventException();
00411       <font class="keywordflow">return</font> const_cast &lt;const void*&gt; (data);
00412     }
00413 
00414   <font class="keyword">private</font>:
00419     UserEvent(UserEventHandler* handlerObj,
00420               UserEventHandler::Handler handlerMethod)
00421     : _handlerObj(handlerObj)
00422     , _handlerMethod(handlerMethod)
00423     {
00424     }
00425 
00426     <font class="keyword">virtual</font> ~UserEvent() <font class="keywordflow">throw</font>()
00427     {
00428     }
00429 
00430     UserEventHandler* _handlerObj;
00431     UserEventHandler::Handler _handlerMethod;
00432   };
00433 
<a name="l00463"></a><a class="code" href="classSmartSockets_1_1MessageEvent.html">00463</a>   <font class="keyword">class </font>T_IPCX_API MessageEvent: <font class="keyword">public</font> TipcEvent {
00464   <font class="keyword">public</font>:
00466 
00467     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00468     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcherTraverser;
00470   <font class="keyword">private</font>:
00475     MessageEvent(MessageEventHandler* handlerObj,
00476                  MessageEventHandler::Handler handlerMethod)
00477     : _handlerObj(handlerObj)
00478     , _handlerMethod(handlerMethod)
00479     {
00480     }
00481     <font class="keyword">virtual</font> ~MessageEvent() <font class="keywordflow">throw</font>()
00482     {
00483     }
00484 
00485     MessageEventHandler* _handlerObj;
00486     MessageEventHandler::Handler _handlerMethod;
00487   };
00488 
00489 
<a name="l00512"></a><a class="code" href="classSmartSockets_1_1SocketEvent.html">00512</a>   <font class="keyword">class </font>T_IPCX_API SocketEvent: <font class="keyword">public</font> TipcEvent {
00513   <font class="keyword">public</font>:
00515 
00516     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00517     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcherTraverser;
00518 
<a name="l00523"></a><a class="code" href="classSmartSockets_1_1SocketEvent.html#a0">00523</a>     sock getSocket() <font class="keywordflow">throw</font> (TipcException)
00524     {
00525       sock socketFd = 0;
00526       <font class="keywordflow">if</font> (!TipcEventGetSocket(_event,&amp;socketFd))
00527         <font class="keywordflow">throw</font> TipcEventException();
00528       <font class="keywordflow">return</font> socketFd;
00529     }
00530 
<a name="l00535"></a><a class="code" href="classSmartSockets_1_1SocketEvent.html#a1">00535</a>     T_IO_CHECK_MODE getCheckMode() <font class="keywordflow">throw</font> (TipcException)
00536     {
00537       T_IO_CHECK_MODE checkMode;
00538       <font class="keywordflow">if</font> (!TipcEventGetCheckMode(_event,&amp;checkMode))
00539         <font class="keywordflow">throw</font> TipcEventException();
00540       <font class="keywordflow">return</font> checkMode;
00541     }
00542 
00543   <font class="keyword">private</font>:
00548     SocketEvent(SocketEventHandler* handlerObj,
00549                 SocketEventHandler::Handler handlerMethod)
00550     : _handlerObj(handlerObj)
00551     , _handlerMethod(handlerMethod)
00552     {
00553     }
00554 
00555     <font class="keyword">virtual</font> ~SocketEvent() <font class="keywordflow">throw</font>()
00556     {
00557     }
00558     SocketEventHandler* _handlerObj;
00559     SocketEventHandler::Handler _handlerMethod;
00560   };
00561 
00562 
<a name="l00585"></a><a class="code" href="classSmartSockets_1_1ConnEvent.html">00585</a>   <font class="keyword">class </font>T_IPCX_API ConnEvent: <font class="keyword">public</font> TipcEvent {
00586   <font class="keyword">public</font>:
00588 
00589     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00590     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcherTraverser;
00592 
<a name="l00596"></a><a class="code" href="classSmartSockets_1_1ConnEvent.html#a0">00596</a>     T_IO_CHECK_MODE getCheckMode() <font class="keywordflow">throw</font> (TipcException)
00597     {
00598       T_IO_CHECK_MODE checkMode;
00599       <font class="keywordflow">if</font> (!TipcEventGetCheckMode(_event,&amp;checkMode))
00600         <font class="keywordflow">throw</font> TipcEventException();
00601       <font class="keywordflow">return</font> checkMode;
00602     }
00603 
00604   <font class="keyword">private</font>:
00609     ConnEvent(ConnEventHandler* handlerObj,
00610               ConnEventHandler::Handler handlerMethod)
00611     : _handlerObj(handlerObj)
00612     , _handlerMethod(handlerMethod)
00613     {
00614     }
00615 
00616     <font class="keyword">virtual</font> ~ConnEvent() <font class="keywordflow">throw</font>()
00617     {
00618     }
00619 
00620     ConnEventHandler* _handlerObj;
00621     ConnEventHandler::Handler _handlerMethod;
00622   };
00623 
<a name="l00637"></a><a class="code" href="classSmartSockets_1_1TimerEvent.html">00637</a>   <font class="keyword">class </font>T_IPCX_API TimerEvent: <font class="keyword">public</font> TipcEvent {
00638   <font class="keyword">public</font>:
00640 
00641     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcher;
00642     <font class="keyword">friend</font> <font class="keyword">class </font>T_IPCX_API TipcDispatcherTraverser;
00644 
<a name="l00648"></a><a class="code" href="classSmartSockets_1_1TimerEvent.html#a0">00648</a>     real8 getTimerInterval() <font class="keywordflow">throw</font> (TipcException)
00649     {
00650       real8 interval;
00651       <font class="keywordflow">if</font> (!TipcEventGetInterval(_event,&amp;interval))
00652         <font class="keywordflow">throw</font> TipcEventException();
00653       <font class="keywordflow">return</font> interval;
00654     }
00655 
<a name="l00661"></a><a class="code" href="classSmartSockets_1_1TimerEvent.html#a1">00661</a>     <font class="keywordtype">void</font> setTimerInterval(real8 interval) <font class="keywordflow">throw</font> (TipcException)
00662     {
00663       <font class="keywordflow">if</font> (!TipcEventSetInterval(_event,interval))
00664         <font class="keywordflow">throw</font> TipcEventException();
00665     }
00666 
00667   <font class="keyword">private</font>:
00672     TimerEvent(TimerEventHandler* handlerObj,
00673                TimerEventHandler::Handler handlerMethod)
00674     : _handlerObj(handlerObj)
00675     , _handlerMethod(handlerMethod)
00676     {
00677     }
00678     <font class="keyword">virtual</font> ~TimerEvent() <font class="keywordflow">throw</font>()
00679     {
00680     }
00681 
00682     TimerEventHandler* _handlerObj;
00683     TimerEventHandler::Handler _handlerMethod;
00684   };
00685 
00686 } <font class="comment">//namespace SmartSockets</font>
00687 
00688 <font class="preprocessor">#endif //_T_EVENT_HH</font>
</font></pre></div><hr><address><small>Generated on Mon Apr 13 16:28:25 2009 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.12 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
